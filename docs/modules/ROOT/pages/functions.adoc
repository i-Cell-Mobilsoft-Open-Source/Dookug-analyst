[[functions]]
= Funkciók

[[generateDocument]]
== Dokumentumgenerálás

A modul többféle módon képes dokumentumokat előállítani, különböző bemeneti formátumok és sablonforrások alapján. A generálás során lehetőség van nemcsak a dokumentum, hanem a hozzá tartozó metaadatok visszaadására is. A generálás történhet dinamikusan kapott sablonból vagy a rendszerben korábban tárolt sablon alapján.

=== Bemeneti formátumok

A dokumentumgenerálási kérések kétféle bemeneti formátumban érkezhetnek:

* Base64binary formátum:
A sablon base64-ben kódolt fájlként érkezik a kérésben, míg a paraméterek kulcs-érték párok vagy JSON struktúrában, szintén base64-ben kódolva.

* Stream (multipart/form-data):
A kérés multipart formában kerül beküldésre, amely lehetővé teszi a sablonfájl(ok) és paraméterek külön kezelését.

=== Sablonforrások

Kérésben kapott sablon alapján:

A sablon közvetlenül a kérés részeként kerül elküldésre (base64binary vagy stream formában). A generálás a kapott sablon és paraméterek alapján történik.

Tárolt sablon alapján:

A sablon a modul adatbázisában szereplő, a TEMPLATE táblában rögzített elemek alapján kerül kiválasztásra. A kérésben szerepel a hivatkozott sablon neve, a szükséges paraméterek és opcionális beállítások.

* Ha a sablon tartalma futás közben változik, az evict végpont meghívása szükséges a cache frissítése érdekében.

* Új sablon rögzítése esetén nem szükséges az evict, a rendszer támogatja a különböző érvényességű sablonokat (múltbeli, aktuális, jövőbeli).

=== Válaszformátumok

Dokumentum visszaadásával:

* A válasz tartalmazza a legenerált dokumentumot.

Metaadat objektummal:

* A generált dokumentum nem kerül visszaadásra, csak a hozzá tartozó metaadat objektum. Ez a lehetőség elérhető mind kérésben kapott, mind tárolt sablon esetén.

[[generateDocumentWithSignatureFromRequestData]]
== Dokumentumgenerálás kérésben kapott adatok alapján aláírással

Az aláíró funkció egy külön végponton érhető el, amely multipart formátumban fogadja a fájlokat. Az aláírás a requestben megadott profilnév alapján, a konfigurációban meghatározott paraméterek szerint történik. A folyamat szinkron módon zajlik, az aláírt fájl pedig a válasz részeként kerül visszaadásra.

[[getDocument]]
== Dokumentum lekérdezése

Azonosító alapján egyesével letölthetők a modul adatbázisában tárolt generált dokumentum. A kérés válaszában visszaadásra kerül a dokumentum octet-stream formátumban, illetve a fájl neve.

[[getData]]
== Adatok lekérdezése

A generált dokumentumok metaadatai lekérdezhetők tömegesen egy szűrhető és rendezhető listában.